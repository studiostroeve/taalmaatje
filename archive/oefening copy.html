<!DOCTYPE html>
<html lang="nl">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tekst Bekijken</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <button class="back-btn" onclick="window.history.back()">⬅️ Terug (Back)</button>
  <div class="text-main">
    <div class="main-content">
      <div id="question-wrapper">
        <h1 id="question-title"></h1>
        <h1 id="question-title-en"></h1>
        <p class="level" id="question-level"></p>
        <p class="level-en" id="question-level-en"></p>
        <p class="description" id="question-description"></p>
        <p class="description-en" id="question-description-en"></p>
        <div id="question-content"></div>
      </div>
    </div>
  </div>
  <script>
    const params = new URLSearchParams(window.location.search);
    const exerciseId = params.get("id");
    const slideId = params.get("slide")

    fetch("exercises.json")
      .then(res => res.json())
      .then(exercises => {
        const exercise = exercises.find(t => t.id == exerciseId);
        if (exercise) {
          const slide = exercise.slides[slideId]

          if (slideId == 0) {
            document.getElementById("question-title").textContent = exercise.title;
            document.getElementById("question-level").textContent = `Niveau: ${exercise.level}`;
            document.getElementById("question-level-en").textContent = `Level: ${exercise.level}`;
            document.getElementById("question-description").innerHTML = exercise.description;
            document.getElementById("question-description-en").innerHTML = exercise["description-en"];
          } else {
            console.log(slide.type)
            if (slide.type == "information") {
              


            } else if (slide.type == "question") {
              const slideContainer = document.createElement("div");
              slideContainer.className = "slide-container"
              if (slide.type == "question") {
                const form = document.createElement("form");
                const userAnswers = [];


                const qDiv = document.createElement("div");
                qDiv.innerHTML = `
      <p><strong>Vraag ${Number(slideId) + 1}. ${slide.question}</strong></p>
      ${slide.options.map(opt => `
        <label>
          <input type="radio" name="q${slideId}" value="${opt}" />
          ${opt}
        </label><br/>
      `).join('')}
      <p class="feedback" id="feedback-${slideId}" style="display: none;"></p>
    `;
                form.appendChild(qDiv);

                const checkBtn = document.createElement("button");
                checkBtn.textContent = "✅ Controleer antwoorden";
                checkBtn.type = "button";
                checkBtn.style.marginTop = "1rem";

                checkBtn.addEventListener("click", () => {
                  let score = 0;
                  const selected = form.querySelector(`input[name="q${slideId}"]:checked`);
                  const feedback = form.querySelector(`#feedback-${slideId}`);
                  if (!selected) {
                    feedback.style.display = "block";
                    feedback.style.color = "orange";
                    feedback.textContent = "⚠️ Geen antwoord gekozen.";
                    return;
                  }

                  if (selected.value === slide.answer) {
                    feedback.style.display = "block";
                    feedback.style.color = "green";
                    feedback.textContent = "✅ Goed!";
                    score++;
                  } else {
                    feedback.style.display = "block";
                    feedback.innerHTML = `<p style="color: red;">❌ Fout. Jouw antwoord: <strong>${selected.value}</strong></p><p style="color: green;">✅ Juiste antwoord: <strong>${slide.answer}</strong></p>`;
                  }
                });

                form.appendChild(checkBtn);
                slideContainer.appendChild(form);
              } else if (slide.type == "information") {


                const iDiv = document.createElement("div");
                iDiv.innerHTML = `<div class="question-wrapper">
      <p style="font-weight: normal;"><strong>${Number(slideId) + 1}. ${slide.title}</strong></p>
            ${slide.content}
                  </div>
    `;
                slideContainer.appendChild(iDiv)


              } else {
                console.error("Slide type not recognized!");
              }

              document.querySelector(".main-content").appendChild(slideContainer);
            }
          }
        }
      });
  </script>
</body>

</html>