<!DOCTYPE html>
<html lang="nl">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tekst Bekijken</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <button class="back-btn" onclick="window.history.back()">⬅️ Terug (Back)</button>
  <div class="text-main">
    <div class="main-content">
      <div id="question-wrapper">
        <h1 id="question-title">Vraag niet gevonden!</h1>
        <h2 id="question-title-en">Question not found!</h2>
        <p class="level" id="question-level"></p>
        <p class="level-en" id="question-level-en"></p>
        <p class="description" id="question-description"></p>
        <p class="description-en" id="question-description-en"></p>
        <div id="question-content"></div>
        <a class="a-button" href="index.html" id="next-slide">
          <h5>Ga terug naar de hoofpagina</h5>
          <h6>Go back to the homepage</h6>
        </a>
      </div>
    </div>
  </div>
  <script>
    const params = new URLSearchParams(window.location.search);
    const exerciseId = params.get("id");
    const slideId = params.get("slide");

    fetch("exercises.json")
      .then(res => res.json())
      .then(exercises => {
        const exercise = exercises.find(t => t.id == exerciseId);
        const slide = exercise.slides[slideId]

        if (!slide) { return console.error("Slide not found!"); }
        /* DEBUGGING */
        console.log(exercise)
        console.log(slide)

        if (slideId <= 0) {
          /* UPDATE BUTTON */
          document.getElementById("next-slide").innerHTML = `<h5>Start oefening</h5><h6>Start exercise</h6>`
          document.getElementById("next-slide").href = `oefening.html?id=${exerciseId}&slide=${Number(slideId) + 1}`;

          document.getElementById("question-title").textContent = exercise.title;
          document.getElementById("question-title-en").textContent = exercise["title-en"];
          document.getElementById("question-level").textContent = `Niveau: ${exercise.level}`;
          document.getElementById("question-level-en").textContent = `Level: ${exercise.level}`;
          document.getElementById("question-description").innerHTML = exercise.description;
          document.getElementById("question-description-en").innerHTML = exercise["description-en"];
        } else {
          /* UPDATE BUTTON */
          document.getElementById('question-wrapper').innerHTML = `<h1 id="question-title">Vraag niet gevonden!</h1>
        <h2 id="question-title-en">Question not found!</h2>
          <div id="question-content"></div>
          <a class="a-button" href="oefening.html?id=${exerciseId}&slide=${Number(slideId) + 1}" id="next-slide">
         <h5>Volgende</h5><h6>Next</h6>
        </a>`
          const qDiv = document.createElement("div");
          qDiv.style.paddingBottom = "2rem"
          qDiv.innerHTML = `
      <p><strong>Vraag ${Number(slideId) + 1}. ${slide.question}</strong></p>
      ${slide.options.map(opt => `
        <label>
          <input type="radio" name="q${slideId}" value="${opt}" />
          ${opt}
        </label><br/>
      `).join('')}
      <p class="feedback" id="feedback-${slideId}" style="display: none;"></p>
    `;
          document.getElementById("question-content").appendChild(qDiv);

        }
      });
  </script>
</body>

</html>